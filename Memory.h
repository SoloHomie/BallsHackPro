#pragma once
#include <vector>
#include <Windows.h>

class Memory
{
public:
	Memory();
	~Memory();

	//写入内存
	void writenianhe(HANDLE hProcess, float nianheValue); //粘合
	void writebiansu(HANDLE hProcess, float biansuValue); //变速
	void writetuqiu(HANDLE hProcess, float tuqiuValue); //吐球
	void writeshiye(HANDLE hProcess, float shiyeValue); //视野
	void writencdx(HANDLE hProcess, float ncdxValue); //昵称大小
	void writeyaoganjiexian(HANDLE hProcess, float ygjiexianValue); //摇杆解限 //摇杆延迟 //有两个地址
	void writefsjiexian(HANDLE hProcess, float fenshenjiexianValue); //分身解限
	void writeyaoganhuitan(HANDLE hProcess, float huitanValue); //摇杆回弹
	void writejuneiqupi(HANDLE hProcess, float juneiqupiValue); //局内取皮
	void writeyaoganyouhua(HANDLE hProcess, float rongchaValue); //摇杆优化  //让摇杆容差为0
	void writeyaogan10000(HANDLE hProcess, float yaogan10000Value); //摇杆一万
	void writePos(HANDLE hProcess, float x, float y); //写入位置
	void writeyaoganyanchi(HANDLE hProcess, float yaoganyanchiValue);
	
	//读取内存
	float readjtygX(HANDLE hProcess); //读取摇杆X
	float readjtygY(HANDLE hProcess); //读取摇杆Y

	HANDLE getProcessHandle(); //获取进程句柄
	HWND getRectHwnd(); //获取模拟器窗口句柄
	POINT getCenterPoint(); //获取模拟器窗口中心点坐标
	void Searcher();

	//特征码
	std::vector<std::vector<BYTE>> patterns = {
		{0xD8, 0x00, 0x00, 0x00, 0x63, 0x04, 0x00, 0x00, 0x00, 0x00}, 
		{0x00, 0x00, 0x80, 0x3F, 0xAB, 0xAA, 0xAA, 0x3E, 0x8F, 0xC2, 0xF5},
		{0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x1F, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x48, 0xAF, 0xBC, 0x9A},
		{0x2C, 0x00, 0x04, 0x00, 0x04, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x05, 0x00, 0x0A, 0xD7, 0x23, 0x3C},
		{0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00},
		{0x88, 0x56, 0x64, 0x20, 0xAF, 0xD5, 0x08},
		{0x80, 0x3F, 0x8F, 0x02, 0x03, 0x00},
		{0x0A, 0xD7, 0xA3, 0x3D, 0x8F, 0x02, 0x03, 0x00, 0x38, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x01, 0x04, 0x00},
		{0x22, 0x00, 0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x29, 0x01},
		{0x00, 0x80, 0x3B, 0x44, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x3F},
		{0x41, 0x20, 0x00, 0x00, 0x3E, 0xA8, 0xF5, 0xC3, 0x02, 0x03, 0x04, 0x03, 0x41, 0x00},
		{0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x0C},
		{0x00, 0x80, 0x3B, 0xC4},
		{0x00, 0x00, 0x48, 0x44},
	};

	// 特征码地址数组（按索引访问，0表示未找到）
	static DWORD_PTR patternAddresses[16];  // 16个特征码
	static HANDLE hProcess;
	static HWND hWnd;

	// 原有地址变量（保留兼容性）
	static long long nianheAdress;
	static long long ncdxAdress;
	static long long biansuAdress;
	static long long ygycAdress_1;
	static long long ygycAdress_2;
	static long long yaoganhuitanAdress_1;
	static long long yaoganhuitanAdress_2;
	static long long yaoganrongchaAdress;
	static long long ygrongchaAdress;
	static long long yaogan10000Adress_1;
	static long long yaogan10000Adress_2;
	static long long yaoganjiexianAdress;
	static long long fsjiexianAdress;
	static long long juneiqupiAdress;
	static long long ncygAdress;
	static long long shiyeAdress;
	static long long tuqiuAdress;
	static long long ncygjsxAdress;
	static long long ncygjsyAdress;
	static long long tijiAdress;
	static long long zhanjuzhiAdress;
	static long long selfsize;
	static long long xmin;
	static long long xmax;
	static long long ymin;
	static long long ymax;
	static float huitanValue;
	static float yaogan10000Value;
	static float step;
	static float yaoganycValue;

	static bool yaoganyouhuaFlag;
	static bool yaoganhuitanFlag;
	static bool yaoganjiexianFlag;
	static bool fsjiexianFlag;
	static bool yaogan10000Flag;
	static bool yaoganycFlag;
	static bool tuqiuFlag;
	static bool gunlunshiyeFlag;
	static bool juneiqupiFlag;
	
};